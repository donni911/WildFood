/*!
 * @splidejs/splide-extension-intersection
 * Version  : 0.2.0
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */function A(n){n.length=0}function b(n,t,e){return Array.prototype.slice.call(n,t,e)}function E(n){return n.bind.apply(n,[null].concat(b(arguments,1)))}function y(n,t){return typeof t===n}var I=Array.isArray;E(y,"function");E(y,"string");E(y,"undefined");function T(n){return I(n)?n:[n]}function _(n,t){T(n).forEach(t)}var V=Object.keys;function N(n,t,e){if(n){var o=V(n);o=e?o.reverse():o;for(var r=0;r<o.length;r++){var f=o[r];if(f!=="__proto__"&&t(n[f],f)===!1)break}}return n}function C(n){return b(arguments,1).forEach(function(t){N(t,function(e,o){n[o]=t[o]})}),n}function g(){var n=[];function t(i,d,s,c){r(i,d,function(u,v,l){var a="addEventListener"in u,p=a?u.removeEventListener.bind(u,v,s,c):u.removeListener.bind(u,s);a?u.addEventListener(v,s,c):u.addListener(s),n.push([u,v,l,s,p])})}function e(i,d,s){r(i,d,function(c,u,v){n=n.filter(function(l){return l[0]===c&&l[1]===u&&l[2]===v&&(!s||l[3]===s)?(l[4](),!1):!0})})}function o(i,d,s){var c,u=!0;return typeof CustomEvent=="function"?c=new CustomEvent(d,{bubbles:u,detail:s}):(c=document.createEvent("CustomEvent"),c.initCustomEvent(d,u,!1,s)),i.dispatchEvent(c),c}function r(i,d,s){_(i,function(c){c&&_(d,function(u){u.split(" ").forEach(function(v){var l=v.split(".");s(c,l[0],l[1])})})})}function f(){n.forEach(function(i){i[4]()}),A(n)}return{bind:t,unbind:e,dispatch:o,destroy:f}}var L="destroy";function $(n){var t=n?n.event.bus:document.createDocumentFragment(),e=g();function o(f,i){e.bind(t,T(f).join(" "),function(d){i.apply(i,I(d.detail)?d.detail:[])})}function r(f){e.dispatch(t,f,b(arguments,1))}return n&&n.event.on(L,e.destroy),C(e,{bus:t,on:o,off:E(e.unbind,t),emit:r})}function K(n,t,e){return Array.prototype.slice.call(n,t,e)}function m(n){return n.bind(null,...K(arguments,1))}function h(n,t){return typeof t===n}m(h,"function");m(h,"string");const R=m(h,"undefined"),S=Object.keys;function D(n,t,e){if(n){let o=S(n);o=e?o.reverse():o;for(let r=0;r<o.length;r++){const f=o[r];if(f!=="__proto__"&&t(n[f],f)===!1)break}}return n}const M="intersection",U="intersection:in",x="intersection:out";function B(n){const{Components:t}=n;return{keyboard:{enable(){t.Keyboard.disable(!1)},disable(){t.Keyboard.disable(!0)}},autoplay:{enable(){n.options.autoplay&&t.Autoplay.play()},disable(){t.Autoplay.pause()}},autoScroll:{enable(){const e=t.AutoScroll;e&&e.play()},disable(){const e=t.AutoScroll;e&&e.pause()}},video:{enable(){const e=t.Video;e&&e.play()},disable(){const e=t.Video;e&&e.pause()}}}}function F(n,t,e){const{emit:o}=$(n),r=e.intersection||{},f=B(n);let i;function d(){window.IntersectionObserver&&(i=new IntersectionObserver(c,{root:r.root,rootMargin:r.rootMargin,threshold:r.threshold}),i.observe(n.root))}function s(){i&&(i.disconnect(),i=null)}function c([a]){a&&(a.isIntersecting?v(a):l(a),o(M,a))}function u(a){D(a,(p,w)=>{if(!R(p)){const O=f[w];p?O.enable():O.disable()}})}function v(a){u(r.inView||{}),o(U,a),r.once&&s()}function l(a){u(r.outView||{}),o(x,a)}return{mount:d,destroy:s}}export{F as Intersection};
